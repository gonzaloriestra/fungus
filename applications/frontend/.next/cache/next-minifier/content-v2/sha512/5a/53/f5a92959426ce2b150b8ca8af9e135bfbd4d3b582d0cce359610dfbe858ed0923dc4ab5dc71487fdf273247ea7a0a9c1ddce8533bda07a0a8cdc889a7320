{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{EeTW:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/predictions\",function(){return n(\"Ou+K\")}])},\"Ou+K\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return w})),n.d(t,\"default\",(function(){return S}));var a=n(\"nKUr\"),c=n(\"vJKn\"),i=n.n(c),r=n(\"rg98\"),o=n(\"q1tI\"),u=n(\"yE/o\"),s=n(\"vFsZ\"),l=n(\"K0hk\"),d=n(\"QetY\"),j=n(\"ezNy\"),b=n(\"aQu0\"),h=n(\"D1pA\"),p=n(\"VtrM\"),O=n(\"20a2\"),v=n(\"xxHi\"),x=n(\"vDqi\"),f=n.n(x);function m(e){var t=e.date,n=e.locationId,a=e.mushroomId;return f.a.get(\"http://localhost:3001/locations/\".concat(n,\"/mushrooms/\").concat(a,\"/predictions?date=\").concat(t))}var _=n(\"cKXd\"),w=!0;function S(e){var t=e.mushrooms,n=Object(O.useRouter)(),c=Object(o.useState)(\"\"),x=c[0],f=c[1],w=Object(o.useState)(n.query.locationId),S=w[0],g=w[1],y=Object(o.useState)(\"\"),E=y[0],I=y[1],N=Object(o.useState)(\"\"),k=N[0],K=N[1],C=Object(o.useState)(!1),F=C[0],P=C[1],q=function(){var e=Object(r.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({date:x,locationId:S,mushroomId:E});case 2:n=e.sent,K(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.probability),P(!0);case 5:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_.b,{activePage:_.a.predictions}),Object(a.jsxs)(u.a,{children:[Object(a.jsxs)(s.a,{onSubmit:q,children:[Object(a.jsxs)(s.a.Field,{children:[Object(a.jsx)(\"label\",{children:\"\\xbfCu\\xe1ndo?\"}),Object(a.jsx)(\"input\",{type:\"date\",onChange:function(e){return f(e.target.value)},placeholder:\"Introduce fecha\"})]}),Object(a.jsxs)(s.a.Field,{children:[Object(a.jsx)(\"label\",{children:\"\\xbfQu\\xe9 seta?\"}),Object(a.jsx)(l.a,{placeholder:\"Seleciona especie\",options:t.map((function(e){return{key:e.id,value:e.id,text:e.scientificName}})),onChange:function(e,t){return I(t.value)}})]}),Object(a.jsxs)(s.a.Field,{children:[Object(a.jsx)(\"label\",{children:\"\\xbfPara qu\\xe9 localizaci\\xf3n?\"}),Object(a.jsx)(l.a,{placeholder:\"Seleciona localizaci\\xf3n\",options:function(){var e=Object(p.a)(\"/api/me/locations\",v.a).data;return null===e||void 0===e?void 0:e.map((function(e){return{key:e.id,value:e.id,text:e.name}}))}(),onChange:function(e,t){g(t.value),n.push(\"predictions/?locationId=\".concat(t.value),void 0,{shallow:!0})},value:S})]}),Object(a.jsx)(d.a,{floated:\"right\",type:\"submit\",primary:!0,children:\"Mostrar predicci\\xf3n\"})]}),Object(a.jsx)(j.a,{active:F,onClickOutside:function(){return P(!1)},page:!0,children:Object(a.jsxs)(b.a,{as:\"h2\",icon:!0,inverted:!0,children:[Object(a.jsx)(h.a,{name:\"heart\"}),Object(a.jsx)(b.a.Subheader,{children:k})]})})]})]})}}},[[\"EeTW\",0,1,2,3,4,5,6,9]]]);","map":{"version":3,"sources":["static/chunks/pages/predictions-08ee7762dc302ef8f12c.js"],"names":["_N_E","window","push","EeTW","module","exports","__webpack_require__","__NEXT_P","Ou+K","__webpack_exports__","r","d","__N_SSP","Predictions","jsx_runtime","regenerator","regenerator_default","n","asyncToGenerator","react","Container","Form","Select","Button","Dimmer","Header","Icon","esm","next_router","fetcher","axios","axios_default","makePrediction","_ref","date","locationId","mushroomId","a","get","concat","components_Header","mushrooms","router","Object","_useState","setDate","_useState2","query","setLocationId","_useState3","setMushroomId","_useState4","prediction","setPrediction","_useState5","active","setActive","handleOnSubmit","_ref2","mark","_callee","_response$data","response","wrap","_context","prev","next","sent","data","probability","stop","apply","this","arguments","children","activePage","predictions","onSubmit","Field","type","onChange","e","target","value","placeholder","options","map","mushroom","key","id","text","scientificName","_","locations","location","name","transformLocationsInOptions","undefined","shallow","floated","primary","onClickOutside","page","as","icon","inverted","Subheader"],"mappings":"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"},"name":"static/chunks/pages/predictions-08ee7762dc302ef8f12c.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[21],{\n\n/***/ \"EeTW\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/predictions\",\n      function () {\n        return __webpack_require__(\"Ou+K\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"Ou+K\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return /* binding */ __N_SSP; });\n__webpack_require__.d(__webpack_exports__, \"default\", function() { return /* binding */ Predictions; });\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"vJKn\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"rg98\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Container/Container.js\nvar Container = __webpack_require__(\"yE/o\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/collections/Form/Form.js + 14 modules\nvar Form = __webpack_require__(\"vFsZ\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/addons/Select/Select.js\nvar Select = __webpack_require__(\"K0hk\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js + 3 modules\nvar Button = __webpack_require__(\"QetY\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/modules/Dimmer/Dimmer.js + 2 modules\nvar Dimmer = __webpack_require__(\"ezNy\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Header/Header.js + 2 modules\nvar Header = __webpack_require__(\"aQu0\");\n\n// EXTERNAL MODULE: ./node_modules/semantic-ui-react/dist/es/elements/Icon/Icon.js + 1 modules\nvar Icon = __webpack_require__(\"D1pA\");\n\n// EXTERNAL MODULE: ./node_modules/swr/esm/index.js + 8 modules\nvar esm = __webpack_require__(\"VtrM\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar next_router = __webpack_require__(\"20a2\");\n\n// EXTERNAL MODULE: ./src/fetching/fetcher.ts\nvar fetcher = __webpack_require__(\"xxHi\");\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"vDqi\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/queries/makePrediction.ts\n\nfunction makePrediction(_ref) {\n  var date = _ref.date,\n      locationId = _ref.locationId,\n      mushroomId = _ref.mushroomId;\n  return axios_default.a.get(\"http://localhost:3001/locations/\".concat(locationId, \"/mushrooms/\").concat(mushroomId, \"/predictions?date=\").concat(date));\n}\n// EXTERNAL MODULE: ./src/components/Header/index.ts + 17 modules\nvar components_Header = __webpack_require__(\"cKXd\");\n\n// CONCATENATED MODULE: ./src/pages/predictions/index.tsx\n\n\n\n\n\n\n\n\n\n\n\n\nvar __N_SSP = true;\nfunction Predictions(_ref) {\n  var mushrooms = _ref.mushrooms;\n  var router = Object(next_router[\"useRouter\"])();\n\n  var _useState = Object(react[\"useState\"])(''),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  var _useState2 = Object(react[\"useState\"])(router.query.locationId),\n      locationId = _useState2[0],\n      setLocationId = _useState2[1];\n\n  var _useState3 = Object(react[\"useState\"])(''),\n      mushroomId = _useState3[0],\n      setMushroomId = _useState3[1];\n\n  var _useState4 = Object(react[\"useState\"])(''),\n      prediction = _useState4[0],\n      setPrediction = _useState4[1];\n\n  var _useState5 = Object(react[\"useState\"])(false),\n      active = _useState5[0],\n      setActive = _useState5[1];\n\n  var handleOnSubmit = /*#__PURE__*/function () {\n    var _ref2 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee() {\n      var _response$data;\n\n      var response;\n      return regenerator_default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return makePrediction({\n                date: date,\n                locationId: locationId,\n                mushroomId: mushroomId\n              });\n\n            case 2:\n              response = _context.sent;\n              setPrediction(response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.probability);\n              setActive(true);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleOnSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClose = function handleClose() {\n    return setActive(false);\n  };\n\n  var handleOnChangeLocation = function handleOnChangeLocation(_, data) {\n    setLocationId(data.value);\n    router.push(\"predictions/?locationId=\".concat(data.value), undefined, {\n      shallow: true\n    });\n  };\n\n  function transformLocationsInOptions() {\n    var result = Object(esm[\"a\" /* default */])(\"/api/me/locations\", fetcher[\"a\" /* default */]);\n    var locations = result.data; // const error: Error = result.error;\n    // if (error) {\n    //   return <div>Loading failed: {error.message}</div>;\n    // }\n    // if (!locations) {\n    //   return <div>Loading...</div>;\n    // }\n\n    return locations === null || locations === void 0 ? void 0 : locations.map(function (location) {\n      return {\n        key: location.id,\n        value: location.id,\n        text: location.name\n      };\n    });\n  }\n\n  function transformMushroomsInOptions() {\n    return mushrooms.map(function (mushroom) {\n      return {\n        key: mushroom.id,\n        value: mushroom.id,\n        text: mushroom.scientificName\n      };\n    });\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"], {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Header[\"b\" /* default */], {\n      activePage: components_Header[\"a\" /* ActivePage */].predictions\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */], {\n        onSubmit: handleOnSubmit,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Field, {\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n            children: \"\\xBFCu\\xE1ndo?\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\", {\n            type: \"date\",\n            onChange: function onChange(e) {\n              return setDate(e.target.value);\n            },\n            placeholder: \"Introduce fecha\"\n          })]\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Field, {\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n            children: \"\\xBFQu\\xE9 seta?\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Select[\"a\" /* default */], {\n            placeholder: \"Seleciona especie\",\n            options: transformMushroomsInOptions() // @ts-ignore\n            ,\n            onChange: function onChange(_, data) {\n              return setMushroomId(data.value);\n            }\n          })]\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Form[\"a\" /* default */].Field, {\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"label\", {\n            children: \"\\xBFPara qu\\xE9 localizaci\\xF3n?\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Select[\"a\" /* default */], {\n            placeholder: \"Seleciona localizaci\\xF3n\",\n            options: transformLocationsInOptions(),\n            onChange: handleOnChangeLocation,\n            value: locationId\n          })]\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */], {\n          floated: 'right',\n          type: \"submit\",\n          primary: true,\n          children: \"Mostrar predicci\\xF3n\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dimmer[\"a\" /* default */], {\n        active: active,\n        onClickOutside: handleClose,\n        page: true,\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Header[\"a\" /* default */], {\n          as: \"h2\",\n          icon: true,\n          inverted: true,\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */], {\n            name: \"heart\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Header[\"a\" /* default */].Subheader, {\n            children: prediction\n          })]\n        })\n      })]\n    })]\n  });\n}\n\n/***/ })\n\n},[[\"EeTW\",0,1,2,3,4,5,6,9]]]);","inputSourceMap":{"version":3,"sources":["/Users/sergiosanchez/Projects/fungus/applications/frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fpredictions&absolutePagePath=private-next-pages%2Fpredictions%2Findex.tsx!","/Users/sergiosanchez/Projects/fungus/applications/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/sergiosanchez/Projects/fungus/applications/frontend/src/queries/makePrediction.ts","/Users/sergiosanchez/Projects/fungus/applications/frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/sergiosanchez/Projects/fungus/applications/frontend/src/pages/predictions/index.tsx"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAA0C;AACjE;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN0B;AACX;AACf;AACA;AACA;AACA,SAAS,eAAK;AACd,C;;;;;ACN0D;AACR;AACF;AACuG;AACe;AAC9H;AACoE;AACnF;AACe;AACK;AACa;AACG;AACtD;AACQ;AACf;AACA,eAAe,gCAAS;;AAExB,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA;;AAEA;AACA,gBAAgB,2CAAiB,eAAe,qBAAmB;AACnE;;AAEA;AACA,aAAa,qBAAmB;AAChC;AACA;AACA;AACA;AACA,qBAAqB,cAAc;AACnC;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,iBAAiB,8BAAM,sBAAsB,0BAAO;AACpD,gCAAgC;AAChC;AACA,sCAAsC,cAAc;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,sBAAsB,2BAAK,CAAC,uBAAS;AACrC,4BAA4B,0BAAI,CAAC,oCAAM;AACvC,kBAAkB,uCAAU;AAC5B,KAAK,gBAAgB,2BAAK,CAAC,4BAAS;AACpC,8BAA8B,2BAAK,CAAC,uBAAI;AACxC;AACA,gCAAgC,2BAAK,CAAC,uBAAI;AAC1C,kCAAkC,0BAAI;AACtC;AACA,WAAW,gBAAgB,0BAAI;AAC/B;AACA;AACA;AACA,aAAa;AACb;AACA,WAAW;AACX,SAAS,gBAAgB,2BAAK,CAAC,uBAAI;AACnC,kCAAkC,0BAAI;AACtC;AACA,WAAW,gBAAgB,0BAAI,CAAC,yBAAM;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS,gBAAgB,2BAAK,CAAC,uBAAI;AACnC,kCAAkC,0BAAI;AACtC;AACA,WAAW,gBAAgB,0BAAI,CAAC,yBAAM;AACtC;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS,gBAAgB,0BAAI,CAAC,yBAAM;AACpC;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO,gBAAgB,0BAAI,CAAC,yBAAM;AAClC;AACA;AACA;AACA,+BAA+B,2BAAK,CAAC,yBAAc;AACnD;AACA;AACA;AACA,kCAAkC,0BAAI,CAAC,uBAAI;AAC3C;AACA,WAAW,gBAAgB,0BAAI,CAAC,yBAAc;AAC9C;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,C","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/predictions\",\n      function () {\n        return require(\"private-next-pages/predictions/index.tsx\");\n      }\n    ]);\n  ","import axios from 'axios';\nexport default function makePrediction(_ref) {\n  var date = _ref.date,\n      locationId = _ref.locationId,\n      mushroomId = _ref.mushroomId;\n  return axios.get(\"http://localhost:3001/locations/\".concat(locationId, \"/mushrooms/\").concat(mushroomId, \"/predictions?date=\").concat(date));\n}","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/sergiosanchez/Projects/fungus/applications/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sergiosanchez/Projects/fungus/applications/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState } from 'react';\nimport { Button, Container, Form, Select, Header as SemanticHeader, Dimmer, Icon } from 'semantic-ui-react';\nimport useSWR from 'swr';\nimport { useRouter } from 'next/router';\nimport fetcher from '../../fetching/fetcher';\nimport makePrediction from '../../queries/makePrediction';\nimport Header, { ActivePage } from '../../components/Header';\nexport var __N_SSP = true;\nexport default function Predictions(_ref) {\n  var mushrooms = _ref.mushrooms;\n  var router = useRouter();\n\n  var _useState = useState(''),\n      date = _useState[0],\n      setDate = _useState[1];\n\n  var _useState2 = useState(router.query.locationId),\n      locationId = _useState2[0],\n      setLocationId = _useState2[1];\n\n  var _useState3 = useState(''),\n      mushroomId = _useState3[0],\n      setMushroomId = _useState3[1];\n\n  var _useState4 = useState(''),\n      prediction = _useState4[0],\n      setPrediction = _useState4[1];\n\n  var _useState5 = useState(false),\n      active = _useState5[0],\n      setActive = _useState5[1];\n\n  var handleOnSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _response$data;\n\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return makePrediction({\n                date: date,\n                locationId: locationId,\n                mushroomId: mushroomId\n              });\n\n            case 2:\n              response = _context.sent;\n              setPrediction(response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.probability);\n              setActive(true);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleOnSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleClose = function handleClose() {\n    return setActive(false);\n  };\n\n  var handleOnChangeLocation = function handleOnChangeLocation(_, data) {\n    setLocationId(data.value);\n    router.push(\"predictions/?locationId=\".concat(data.value), undefined, {\n      shallow: true\n    });\n  };\n\n  function transformLocationsInOptions() {\n    var result = useSWR(\"/api/me/locations\", fetcher);\n    var locations = result.data; // const error: Error = result.error;\n    // if (error) {\n    //   return <div>Loading failed: {error.message}</div>;\n    // }\n    // if (!locations) {\n    //   return <div>Loading...</div>;\n    // }\n\n    return locations === null || locations === void 0 ? void 0 : locations.map(function (location) {\n      return {\n        key: location.id,\n        value: location.id,\n        text: location.name\n      };\n    });\n  }\n\n  function transformMushroomsInOptions() {\n    return mushrooms.map(function (mushroom) {\n      return {\n        key: mushroom.id,\n        value: mushroom.id,\n        text: mushroom.scientificName\n      };\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Header, {\n      activePage: ActivePage.predictions\n    }), /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsxs(Form, {\n        onSubmit: handleOnSubmit,\n        children: [/*#__PURE__*/_jsxs(Form.Field, {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\xBFCu\\xE1ndo?\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"date\",\n            onChange: function onChange(e) {\n              return setDate(e.target.value);\n            },\n            placeholder: \"Introduce fecha\"\n          })]\n        }), /*#__PURE__*/_jsxs(Form.Field, {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\xBFQu\\xE9 seta?\"\n          }), /*#__PURE__*/_jsx(Select, {\n            placeholder: \"Seleciona especie\",\n            options: transformMushroomsInOptions() // @ts-ignore\n            ,\n            onChange: function onChange(_, data) {\n              return setMushroomId(data.value);\n            }\n          })]\n        }), /*#__PURE__*/_jsxs(Form.Field, {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\xBFPara qu\\xE9 localizaci\\xF3n?\"\n          }), /*#__PURE__*/_jsx(Select, {\n            placeholder: \"Seleciona localizaci\\xF3n\",\n            options: transformLocationsInOptions(),\n            onChange: handleOnChangeLocation,\n            value: locationId\n          })]\n        }), /*#__PURE__*/_jsx(Button, {\n          floated: 'right',\n          type: \"submit\",\n          primary: true,\n          children: \"Mostrar predicci\\xF3n\"\n        })]\n      }), /*#__PURE__*/_jsx(Dimmer, {\n        active: active,\n        onClickOutside: handleClose,\n        page: true,\n        children: /*#__PURE__*/_jsxs(SemanticHeader, {\n          as: \"h2\",\n          icon: true,\n          inverted: true,\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"heart\"\n          }), /*#__PURE__*/_jsx(SemanticHeader.Subheader, {\n            children: prediction\n          })]\n        })\n      })]\n    })]\n  });\n}"]}}