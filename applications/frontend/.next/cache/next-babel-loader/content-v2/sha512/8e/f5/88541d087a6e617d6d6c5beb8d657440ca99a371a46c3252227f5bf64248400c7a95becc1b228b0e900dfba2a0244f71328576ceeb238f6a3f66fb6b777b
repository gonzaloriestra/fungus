{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { Header, Icon, Form, Button, Select } from 'semantic-ui-react';\nimport { useRouter } from 'next/router';\nimport { withServerAuthRequired } from '../../authentication/withAuthRequired';\nimport addHarvest from './queries/addHarvest';\nimport getMushrooms from './queries/getMushrooms';\nexport default function NewHarvest({\n  mushrooms\n}) {\n  const {\n    0: date,\n    1: setDate\n  } = useState('');\n  const {\n    0: mushroomId,\n    1: setMushroomId\n  } = useState('');\n  const {\n    0: quantity,\n    1: setQuantity\n  } = useState('');\n  const router = useRouter();\n\n  const handleOnSubmit = async () => {\n    const locationId = router.query.locationId;\n    await addHarvest({\n      date,\n      locationId,\n      mushroomId,\n      quantity\n    });\n    router.push(`/locations/${locationId}`);\n  };\n\n  function transformMushroomsInOptions() {\n    return mushrooms.map(mushroom => ({\n      key: mushroom.id,\n      value: mushroom.id,\n      text: mushroom.scientificName\n    }));\n  }\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Header, {\n      as: \"h1\",\n      children: [/*#__PURE__*/_jsx(Icon, {\n        name: \"map outline\"\n      }), /*#__PURE__*/_jsx(Header.Content, {\n        children: \"New Harvest\"\n      })]\n    }), /*#__PURE__*/_jsxs(Form, {\n      style: {\n        padding: '0 100px'\n      },\n      onSubmit: handleOnSubmit,\n      children: [/*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Date\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"date\",\n          placeholder: \"Date\",\n          onChange: e => setDate(e.target.value)\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Mushroom\"\n        }), /*#__PURE__*/_jsx(Select, {\n          placeholder: \"Mushroom\",\n          options: transformMushroomsInOptions() // @ts-ignore\n          ,\n          onChange: (_, data) => setMushroomId(data.value)\n        })]\n      }), /*#__PURE__*/_jsxs(Form.Field, {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"Quantity\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          placeholder: \"quantity\",\n          onChange: e => setQuantity(e.target.value)\n        })]\n      }), /*#__PURE__*/_jsx(Button, {\n        type: \"submit\",\n        primary: true,\n        children: \"Save\"\n      })]\n    })]\n  });\n}\nexport const getServerSideProps = withServerAuthRequired(async () => {\n  const res = await getMushrooms();\n  return {\n    props: {\n      mushrooms: res.data\n    }\n  };\n});","map":null,"metadata":{},"sourceType":"module"}